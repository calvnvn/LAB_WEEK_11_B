ASSIGNMENT PART 3
1. When a user takes a picture, that picture is stored in a path based on the given URI. In which part of the code handles this?
Code that handles the path creation inside ProviderFileManager.kt:

val file = File(
    context.getExternalFilesDir(fileHelper.getPicturesFolder()),
    name
)


2. In your FileInfo.kt, there are 5 attributes. On the first attribute, what does the URI refer to? And on the fourth attribute, what does relativePath refer to?

URI (first attribute): This refers to the content URI generated by the FileProvider . It acts as a secure identifier that grants temporary read/write permission to external apps (like the Camera app) so they can save the captured image/video to the file location defined by our app without exposing the raw file path.

relativePath (fourth attribute): This refers to the folder location where the media file should be organized within the device's shared storage (specifically inside the MediaStore) . For example, for images, this typically refers to the standard "Pictures" directory (Environment.DIRECTORY_PICTURES). This helps the Gallery app organize photos correctly.


3. [Bonus] Explain the chronological order from when a user takes a picture until the file is stored in the MediaStore.

a. User Interaction: The user clicks the "Photo" button in MainActivity .
b. Permission Check: The app checks for external storage permissions (required for Android 9 and below) via checkStoragePermission .
c. File & URI Generation: The openImageCapture function calls providerFileManager.generatePhotoUri. This creates a physical File object in the app's external files directory and generates a secure content Uri using FileProvider .
d. Launch Camera: The takePictureLauncher is launched with the generated Uri. This opens the external Camera app .
e. Capture: The user takes the photo in the Camera app. The Camera app writes the image data directly to the Uri we provided.
f. Return to App: The Camera app closes, and the result is returned to the takePictureLauncher callback in MainActivity .
g. Insert to MediaStore: If the capture was successful, providerFileManager.insertImageToStore(photoInfo) is called .
h. Background Copying: Inside ProviderFileManager, the insertToStore function runs on a background thread (executor). It creates a new entry in the system's MediaStore (Gallery) and copies the binary data from the temporary file (via Input Stream) to the final MediaStore location (via Output Stream) .